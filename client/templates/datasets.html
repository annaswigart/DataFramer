<template name="datasets-list">

    <ul class="nav nav-pills topnav">
        <li ng-class="{active: checkState('home')}">
            <a ui-sref="home" data-toggle="tooltip" data-placement="bottom" title="Home">
                <i class="fa fa-home"></i>
            </a>
        </li>
        <li ng-class="{active: checkState('home.upload')}">
            <a ui-sref="home.upload" data-toggle="tooltip" data-placement="bottom" title="Upload new">
                <i class="fa fa-upload"></i>
            </a>
        </li>
    </ul>

    <h4 class="name">my datasets</h4>
    <input type="text" placeholder="Search datasets" class="search-box" ng-model="searchBox"/>
    <ul class="nav nav-stacked">
        <li ng-repeat="dataset in datasets | filter:searchBox">
            <a ui-sref="dataset({datasetId: dataset._id})">[[ dataset.name ]]</a>
        </li>
    </ul>
</template>

<template name="vars-list">

    <ul class="nav nav-pills topnav">
        <li ng-class="{active: checkState('home')}">
            <a ui-sref="home" data-toggle="tooltip" data-placement="bottom" title="Home">
                <i class="fa fa-home"></i>
            </a>
        </li>
        <li ng-class="{active: checkState('home.upload')}">
            <a ui-sref="home.upload" data-toggle="tooltip" data-placement="bottom" title="Upload new">
                <i class="fa fa-upload"></i>
            </a>
        </li>
        <li ng-class="{active: checkState('dataset')}">
            <a ui-sref="dataset({datasetId: dataset._id})"
            data-toggle="tooltip" data-placement="bottom" title="Dataset overview">
                <i class="fa fa-question"></i>
                <i class="fa fa-th-large"></i>
            </a>
        </li>
    </ul>

    <h4 class="name">[[ dataset.name ]]</h4>
    <input type="text" placeholder="Search variables" class="search-box" ng-model="searchBox"/>
    <div>
        <div ng-repeat="type in datatypes" class="datatype" ng-class="type">
            <h5>[[ type ]] <span ng-show="type == 'string'">(categorical)</span></h5>
            <ul class="nav nav-stacked">
                <li ng-repeat="col in dataset.columns | filter:{datatype: type} | filter:searchBox">
                    <a href="#" ng-click="varClick(col)" ng-class="{active: colActive(col)}">[[ col.name ]]</a>
                </li>
            </ul>
        </div>
    </div>

</template>

<template name="questions-list">
     <div>
         <h2>my questions</h2>

         <form onsubmit="this.reset(); return false;" name="qAdd" role="form">
             <div class="form-group">
                 <label>Add a new question: </label>
                 <div class="input-group">
                     <input type="text" ng-model="newQuestion.text" name="text" class="form-control"/>
                     <span class="input-group-btn">
                         <button ng-click="addQuestion(qAdd.text)" class="btn btn-primary">
                             Add
                         </button>
                     </span>

                 </div>

             </div>

         </form>

         <ul class="questions-list">
             <li ng-repeat="question in dataset.questions track by question.id">
                 <span ng-class="answerable(question.id)">
                     <i class="fa ng-class:answerableIcon(question.id);"></i>
                 </span>
                 <a ui-sref="dataset.question({questionId: question.id})">
                     [[ question.text ]]<br/>
                     <small class="text-muted">[[ question.notes ]]</small>
                 </a>
             </li>
         </ul>

         <h2>variables overview</h2>
         <h4>number of records: [[ dataset.rowCount ]] | number of variables: [[ dataset.columns.length ]]</h4>
         <div class="row">
             <div class="col-md-6 chart-container" ng-repeat="col in dataset.columns" ng-attr-id="col-[[$index]]">
                 {{> df_chart }}
             </div>
         </div>
     </div>
 </template>

 <template name="question-single">
     <div class="question-single">
         <h1>[[ question.text ]]</h1>

         <h2 ng-show="!columns.length">select variables to add them to your question</h2>

         <div class="row charts-container">
             <div class="col-md-6 chart-container" ng-repeat="col in columns"
             ng-attr-id="col-[[ question.col_refs[$index] ]]">
                 {{> df_chart }}
             </div>
         </div>
     </div>

     <div class="floating-column">
        <div class="container">
            <div class="row">
                <div class="col-md-10 col-md-offset-2 answerable-form">
                    <form role="form">
                        <div class="form-group">
                            Can you answer your question with this dataset?
                            <span class="ans false pull-right" ng-class="isSet(false)"
                                ng-click="setAns(false)">
                                <i class="fa fa-close"></i>
                            </span>
                            <span class="ans true pull-right" ng-class="isSet(true)"
                                ng-click="setAns(true)">
                                <i class="fa fa-check"></i>
                            </span>
                        </div>
                        <div class="form-group">
                            <textarea class="form-control" rows="2"
                            ng-model="question.notes"
                            placeholder="Notes"></textarea>
                        </div>

                    </form>
                </div>
            </div>
        </div>
     </div>
 </template>

<template name="df_chart">
    <h3 class="var-name">
        [[col.name ]]

        <a class="pull-right control" ng-click="remove(col)" ng-show="checkState('dataset.question')">
            <i class="fa fa-times-circle"></i>
        </a>

        <span class="dropdown pull-right control">
            <a data-toggle="dropdown">
                <i class="fa fa-pencil-square"></i><span class="caret"></span>
            </a>

            <ul class="dropdown-menu" role="menu">
                <li role="presentation" ng-repeat="type in ['string', 'integer', 'float', 'date']">
                    <a role="menuitem" tabindex="-1" href="#" ng-click="changeType(col, type)">
                        change datatype to [[ type ]]
                        <span ng-show="type == 'string'"> (categorical)</span>
                    </a>
                </li>
            </ul>
        </span>

        <a class="pull-right control" ng-click="histControl.resetBars()">
            <i class="fa fa-refresh"></i>
        </a>

    </h3>
    <h5>nulls: [[ col.nulls ]]</h5>
    <div hist chart-data="[[ col ]]" control="histControl"></div>
    <form role="form">

        <div class="form-group">
            <textarea class="form-control" rows="2" ng-model="col.notes" placeholder="Notes"></textarea>
        </div>

</form>
</template>
